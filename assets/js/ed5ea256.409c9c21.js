"use strict";(self.webpackChunkayon_docs=self.webpackChunkayon_docs||[]).push([[675],{4137:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>y});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,y=u["".concat(p,".").concat(m)]||u[m]||s[m]||i;return n?a.createElement(y,o(o({ref:t},d),{},{components:n})):a.createElement(y,o({ref:t},d))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6164:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>s,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(4137));const i={id:"dev_api_cpp",title:"AYON C++ API",sidebar_label:"C++ API",description:"Information about AYON C++ API",toc_max_heading_level:5},o=void 0,l={unversionedId:"dev_api_cpp",id:"dev_api_cpp",title:"AYON C++ API",description:"Information about AYON C++ API",source:"@site/docs/dev_api_cpp.md",sourceDirName:".",slug:"/dev_api_cpp",permalink:"/ayon-documentation/docs/dev_api_cpp",draft:!1,editUrl:"https://github.com/ynput/ayon-documentation/tree/main/website/docs/dev_api_cpp.md",tags:[],version:"current",frontMatter:{id:"dev_api_cpp",title:"AYON C++ API",sidebar_label:"C++ API",description:"Information about AYON C++ API",toc_max_heading_level:5},sidebar:"Dev",previous:{title:"Python API",permalink:"/ayon-documentation/docs/dev_api_python"},next:{title:"USD Resolver",permalink:"/ayon-documentation/docs/dev_api_usd_resolver"}},p={},c=[{value:"About AYON C++ API",id:"about-ayon-c-api",level:2},{value:"Get Started",id:"get-started",level:2},{value:"Fetch and Build The library",id:"fetch-and-build-the-library",level:3},{value:"Include it in your cmake projects",id:"include-it-in-your-cmake-projects",level:3},{value:"Fetch Dependencies",id:"fetch-dependencies",level:4},{value:"CPP Project Files",id:"cpp-project-files",level:4},{value:"Build the project",id:"build-the-project",level:4},{value:"Test Run",id:"test-run",level:4},{value:"Learn More",id:"learn-more",level:2}],d={toc:c},u="wrapper";function s(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"about-ayon-c-api"},"About AYON C++ API"),(0,r.kt)("p",null,"The AYON CPP API allows communication with the AYON server.\nImplementation is mainly focused on ",(0,r.kt)("a",{parentName:"p",href:"/ayon-documentation/docs/dev_api_usd_resolver"},"AYON USD Resolver")," to communicate with the server resolve endpoint."),(0,r.kt)("h2",{id:"get-started"},"Get Started"),(0,r.kt)("admonition",{title:"Development Environment",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"We assume you already have setup your c++ dev environment as well as cmake.")),(0,r.kt)("h3",{id:"fetch-and-build-the-library"},"Fetch and Build The library"),(0,r.kt)("p",null,"AYON CPP API is a static lib."),(0,r.kt)("p",null,"You need to build it first. We've prepared python script to do the hard lifting for you."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone --recurse-submodules https://github.com/ynput/ayon-cpp-api.git\ncd ayon-cpp-api\npython AyonBuild.py setup \npython AyonBuild.py runStageGRP CleanBuild\n")),(0,r.kt)("h3",{id:"include-it-in-your-cmake-projects"},"Include it in your cmake projects"),(0,r.kt)("p",null,"Once you include it and build your cpp project you'll no longer need the library."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"A CPP Example"),(0,r.kt)("p",null,"Here's an example cpp project structure"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},".\n\u251c\u2500 ext/ayon-cpp-api\n\u251c\u2500 CMakelists.txt\n\u2514\u2500 main.cpp\n")),(0,r.kt)("h4",{id:"fetch-dependencies"},"Fetch Dependencies"),(0,r.kt)("p",null,"Please refer to ",(0,r.kt)("a",{parentName:"p",href:"#fetch-and-build-the-library"},"Fetch and Build The library")," section above for the instructions\nand repeat them inside ",(0,r.kt)("inlineCode",{parentName:"p"},"ext")," folder in your project folder."),(0,r.kt)("h4",{id:"cpp-project-files"},"CPP Project Files"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="main.cpp"',title:'"main.cpp"'},'// AYON CPP API Test\n#include "AyonCppApi.h"\n\nint main (){\n    AyonApi con = AyonApi();\n    return 0;\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="CMakelists.txt"',title:'"CMakelists.txt"'},'cmake_minimum_required(VERSION "3.28.1")\n\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED True)\n\nproject(main)\n\n# Include AyonCppApi \nadd_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/ext/ayon-cpp-api")\ninclude_directories("${CMAKE_CURRENT_SOURCE_DIR}/ext/ayon-cpp-api")\n\nadd_executable(${PROJECT_NAME} main.cpp)\n\ntarget_link_libraries(${PROJECT_NAME} AyonCppApi)\n')),(0,r.kt)("h4",{id:"build-the-project"},"Build the project"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"I'm using ",(0,r.kt)("inlineCode",{parentName:"p"},"VS studio")," (devenv.exe) on my side.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cmake -S . -B build -DJTRACE=0 \ndevenv build/main.sln /Build \n")),(0,r.kt)("h4",{id:"test-run"},"Test Run"),(0,r.kt)("p",null,"you'd need to set few environment variables.\notherwise, it won't work."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"set AYON_SERVER_URL=<your ayon server url>\nset AYON_API_KEY=<your server api key>\nset AYON_PROJECT_NAME=<project name>\nset AYON_SITE_ID=<site id>  # e.g. military-mouse-of-jest\n\nbuild\\Debug\\main.exe\n")),(0,r.kt)("p",null,"Expected Output"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"my_cpp_project> build\\Debug\\main.exe\n[2024-09-20 15:59:31.541] [info] Loaded AYON_API_KEY and AYON_SERVER_URL\n[2024-09-20 15:59:31.542] [info] Found SideId\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"AYON_SITE_ID")," fallback"),(0,r.kt)("p",{parentName:"admonition"},"When skipping setting ",(0,r.kt)("inlineCode",{parentName:"p"},"AYON_SITE_ID")," env variable, the lib will default to file named ",(0,r.kt)("inlineCode",{parentName:"p"},"site_id")," ",(0,r.kt)("em",{parentName:"p"},"without an extension"),".\nlocated at ",(0,r.kt)("inlineCode",{parentName:"p"},"%AppData%/Roaming/AYON/site_id")," on windows."))),(0,r.kt)("h2",{id:"learn-more"},"Learn More"),(0,r.kt)("p",null,"For More info and a full list of available commands\nPlease refer to our ",(0,r.kt)("a",{parentName:"p",href:"https://ynput.github.io/ayon-cpp-api/"},"AYON CPP API"),"."))}s.isMDXComponent=!0}}]);